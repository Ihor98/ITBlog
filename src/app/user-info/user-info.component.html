<h2>Search form</h2>
<form [formGroup]="searchForm">
  <div class="form-row">
    <div class="form-group col">
      <input
        type="text"
        class="form-control"
        placeholder="First Name"
        formControlName="firstname"
      />
    </div>
    <div class="form-group col">
      <input
        type="text"
        class="form-control"
        placeholder="Last Name"
        formControlName="lastname"
      />
    </div>
  </div>
  <div class="form-row">
    <div class="form-group col">
      <input
        type="text"
        class="form-control"
        placeholder="Username"
        formControlName="username"
      />
    </div>
    <div class="form-group col">
      <input
        type="text"
        class="form-control"
        placeholder="Email"
        formControlName="mail"
      />
    </div>
    <div class="form-group col">
      <input
        type="text"
        class="form-control"
        placeholder="Phone"
        formControlName="phone"
      />
    </div>
  </div>
</form>
<button class="btn btn-outline-primary" (click)="clear()">Clear</button>
<button class="btn btn-primary ml-5" (click)="getUsers()">Find</button>
<table class="table table-hover mt-5" *ngIf="toggle">
  <thead>
    <tr>
      <th>No.</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Username</th>
      <th>Phone</th>
      <th colspan="3">Action</th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngFor="let user of users; index as i">
      <tr *ngIf="user.show">
        <td>{{ i + 1 }}</td>
        <td>{{ user.firstname }}</td>
        <td>{{ user.lastname }}</td>
        <td>{{ user.username }}</td>
        <td>{{ user.phone }}</td>
        <td colspan="3">
          <button
            class="btn btn-outline-primary mr-3"
            (click)="user.show = !user.show"
          >
            Update
          </button>
          <button
            class="btn btn-success mr-3"
            data-toggle="collapse"
            [attr.data-target]="'#' + i"
            aria-expanded="true"
            [attr.aria-controls]="i"
          >
            Adress info
          </button>
          <button class="btn btn-danger" (click)="deleteUsers(user.id)">
            Delete
          </button>
        </td>
      </tr>
      <tr *ngIf="!user.show" [id]="i">
        <td colspan="12">
          <form [formGroup]="updatedUsersForm">
            <table class="table">
              <ng-container formArrayName="updatedUserInfoArray">
                <tr [formGroupName]="i" [id]="i">
                  <td>{{ i + 1 }}</td>
                  <td>
                    <input
                      type="text"
                      class="form-control"
                      formControlName="firstname"
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      class="form-control"
                      formControlName="lastname"
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      class="form-control"
                      formControlName="username"
                    />
                  </td>
                  <td>
                    <input
                      type="text"
                      class="form-control"
                      formControlName="phone"
                    />
                  </td>
                  <td>
                    <button
                      class="btn btn-outline-primary mr-1"
                      (click)="
                        updateUserData(
                          user,
                          updatedUsersForm.get('updatedUserInfoArray').controls[
                            i
                          ].value
                        )
                      "
                    >
                      Save
                    </button>
                  </td>
                </tr>
              </ng-container>
            </table>
          </form>
        </td>
      </tr>
      <tr>
        <td colspan="12">
          <div class="collapse show" [id]="i">
            <table class="table">
              <thead>
                <tr>
                  <th>Adress type</th>
                  <th>Country</th>
                  <th>City</th>
                  <th>Postal code</th>
                  <th>Adress</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <ng-container *ngFor="let adress of user.formAdress">
                  <tr>
                    <td>{{ adress.adressType }}</td>
                    <td>{{ adress.country }}</td>
                    <td>{{ adress.city }}</td>
                    <td>{{ adress.postalCode }}</td>
                    <td>{{ adress.adress }}</td>
                    <td>
                      <button class="btn btn-outline-primary mr-3">
                        Update
                      </button>
                      <button class="btn btn-danger">Delete</button>
                    </td>
                  </tr>
                  <tr>
                    <td colspan="12">
                      <form [formGroup]="updatedUsersForm">
                        <table class="table">
                          <ng-container formArrayName="updatedUserInfoArray">
                            <tr [formGroupName]="i">
                              <td>
                                <select
                                  class="custom-select form-control"
                                  formControlName="adressType"
                                >
                                  <option value="Billing Address">
                                    Billing Address
                                  </option>
                                  <option value="Shipment Address">
                                    Shipment Address
                                  </option>
                                  <option value="Home Address">
                                    Home Address
                                  </option>
                                </select>
                              </td>
                              <td>
                                <input
                                  type="text"
                                  class="form-control"
                                  formControlName="adress"
                                />
                              </td>
                              <td>
                                <input
                                  type="text"
                                  class="form-control"
                                  formControlName="city"
                                />
                              </td>
                              <td>
                                <input
                                  type="text"
                                  class="form-control"
                                  formControlName="country"
                                />
                              </td>
                              <td>
                                <input
                                  type="text"
                                  class="form-control"
                                  formControlName="postalCode"
                                />
                              </td>
                            </tr>
                          </ng-container>
                        </table>
                      </form>
                    </td>
                  </tr>
                </ng-container>
              </tbody>
            </table>
          </div>
        </td>
      </tr>
    </ng-container>
  </tbody>
</table>

<!--<div id="accordio">-->
<!--  <div class="card">-->
<!--    <div class="card-header" id="headingOne">-->
<!--      <h5 class="mb-0">-->
<!--        <button-->
<!--          class="btn btn-link"-->
<!--          data-toggle="collapse"-->
<!--          data-target="#collapseOne"-->
<!--          aria-expanded="true"-->
<!--          aria-controls="collapseOne"-->
<!--        >-->
<!--          Collapsible Group Item #1-->
<!--        </button>-->
<!--      </h5>-->
<!--    </div>-->

<!--    <div-->
<!--      id="collapseOne"-->
<!--      class="collapse show"-->
<!--      aria-labelledby="headingOne"-->
<!--      data-parent="#accordio"-->
<!--    >-->
<!--      <div class="card-body">-->
<!--        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus-->
<!--        terry richardson ad squid. 3 wolf moon officia aute, non cupidatat-->
<!--        skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod.-->
<!--        Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid-->
<!--        single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh-->
<!--        helvetica, craft beer labore wes anderson cred nesciunt sapiente ea-->
<!--        proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft-->
<!--        beer farm-to-table, raw denim aesthetic synth nesciunt you probably-->
<!--        haven't heard of them accusamus labore sustainable VHS.-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->
<!--  <div class="card">-->
<!--    <div class="card-header" id="headingTwo">-->
<!--      <h5 class="mb-0">-->
<!--        <button-->
<!--          class="btn btn-link collapsed"-->
<!--          data-toggle="collapse"-->
<!--          data-target="#collapseTwo"-->
<!--          aria-expanded="true"-->
<!--          aria-controls="collapseTwo"-->
<!--        >-->
<!--          Collapsible Group Item #2-->
<!--        </button>-->
<!--      </h5>-->
<!--    </div>-->
<!--    <div-->
<!--      id="collapseTwo"-->
<!--      class="collapse"-->
<!--      aria-labelledby="headingTwo"-->
<!--      data-parent="#accordio"-->
<!--    >-->
<!--      <div class="card-body">-->
<!--        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus-->
<!--        terry richardson ad squid. 3 wolf moon officia aute, non cupidatat-->
<!--        skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod.-->
<!--        Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid-->
<!--        single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh-->
<!--        helvetica, craft beer labore wes anderson cred nesciunt sapiente ea-->
<!--        proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft-->
<!--        beer farm-to-table, raw denim aesthetic synth nesciunt you probably-->
<!--        haven't heard of them accusamus labore sustainable VHS.-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->
<!--  <div class="card">-->
<!--    <div class="card-header" id="headingThree">-->
<!--      <h5 class="mb-0">-->
<!--        <button-->
<!--          class="btn btn-link collapsed"-->
<!--          data-toggle="collapse"-->
<!--          data-target="#collapseThree"-->
<!--          aria-expanded="false"-->
<!--          aria-controls="collapseThree"-->
<!--        >-->
<!--          Collapsible Group Item #3-->
<!--        </button>-->
<!--      </h5>-->
<!--    </div>-->
<!--    <div-->
<!--      id="collapseThree"-->
<!--      class="collapse"-->
<!--      aria-labelledby="headingThree"-->
<!--      data-parent="#accordio"-->
<!--    >-->
<!--      <div class="card-body">-->
<!--        Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus-->
<!--        terry richardson ad squid. 3 wolf moon officia aute, non cupidatat-->
<!--        skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod.-->
<!--        Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid-->
<!--        single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh-->
<!--        helvetica, craft beer labore wes anderson cred nesciunt sapiente ea-->
<!--        proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft-->
<!--        beer farm-to-table, raw denim aesthetic synth nesciunt you probably-->
<!--        haven't heard of them accusamus labore sustainable VHS.-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->
